<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
      body{background-image: url("monhan.jpg");}
      img{width:100px;}
      img{transition: transform.3s ease}
      body{ margin: 0;}
      img{width:50px;}
      .container{display:flex;
                 height: 100vh;}
      .item1{flex-grow:2;
      background-color: black:}
      .item2{flex-grow:4;
      background-color: blue;}
      .item3{flex-grow:3;
      background-color: red;}

      #buildings_sell{
        display: none;
      }
    </style>
  </head>
<body>
    <script type="text/javascript">

    let event_ids=[];

    let ls_count=localStorage.getItem("ls_count");
    if(ls_count){
      cookie_count=parseInt(ls_count);
    }else{
      cookie_count=0;
    }

    class Building{
      constructor(time,num){
        this.event_ids=[];
        this.interval_time=time;
        this.add_num=num;
      }
      count_up(num){
        count+=num
      }
      buy(){
        let self=this;
        let return_id=setInterval(function(){
          self.count_up(self.add_num);
        },1000);
        this.event_ids.push(return_id);
      }
    }
    let curser=new Building(10000,1);
    let grandma=new Building(1000,1);
    let farm=new Building(1000,8);
    let mine=new Building(1000,20);
    cursor.buy();
    curser.sell();

    setInterval(save_action,1000);
    function save_action(){
      localStorage.setItem("Is_count",cookie_count);
    }

    su_event_id=setInterval(screen_update,100);
    function screen_update(){
      var count_text=document.getElementById('cookie_count')
      count_text.textContent=cookie_count;
    }

    function event_clear(){
      clearInterval(su_event_id);
    }

      function cookieclick(num){
      var count_text=document.getElementById('cookie_img');
      cookie_img.classList.remove('animate__animated','animate_shakeX');
      void cookie_img.offsetWidth;
      cookie_img.classList.add('animate__animated','animate_shakeX');

      var count_text = document.getElementById('cookie_count');
      cookie_count= cookie_count + num;
      count_text.textContent = cookie_count;
    }

      function cursor(){
      if(cookie_count>=10){
        cookie_count-=10;

        let r_id=setInterval(cookieclick,1000,1);
        event_ids.push(r_id);
      }
      }
      function se_curser(){
         if(event_ids.length>0)
        　　let r_id=event_ids.pop();
        　　clearInterval(r_id);
      }
    }

      function grandma(){
        setInterval(cookieclick,1000,4);
        setInterval("cookieclick()",1000);
      }

      function buildings_switch() {
        let buy_ele=document.getElementById('buildings_buy');
        let sell_ele=document.getElementById('buildings_sell');

        if(buy_ele.style.display !="none"){
          buy_ele.style.display="none";
          sell_ele.style.display="block";
        }else{
          buy_ele.style.display="block";
          sell_ele.style.display="none";
        }
      }

        list.style.display="none";
      }

    </script>
    <div class="container">
    <div class="item1">
      <button id="screen_switch" onclick="event_clear()" type="button" name="button">更新切り替え</button>
      <p>
      <span id="cookie_count"></span>cookies
    </p>
  <img id="cookie.jpg.jpg"onclick="cookieclick(1)" src="cookie,jpg.jpg"alt="">
</div>
<div class="Item2">
  <p class="animate__animated animate_bounce">製作途中
  </div>
  <div class="Item3">
    <div id="buildings_buy">
    <span onclick="buildings_switch()">購入</span>
    <ul>
      <li onclick="cursor()">カーソル</li>
    <li　onclick="grandma()">グランマ</li>
    <li onclick="farm()">ファーム</li>
    <li onclick="mine()">マイン</li>
    <li>工場</li>
    <li></li>
  </ul>
</div>
  売却
  <div id="buildings_sell">
  <ul>
    <li onclick="sell_cursor()">カーソル</li>
  <li　onclick="sell_grandma()">グランマ</li>
  <li onclick="sell_farm()">ファーム</li>
  <li onclick="sell_mine()">マイン</li>
  <li></li>
</ul>
</div>
</div>
</body>
</html>
